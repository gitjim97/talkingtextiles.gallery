---
// SEO Component for page-specific optimizations
interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  image?: string;
  url?: string;
  type?: string;
  publishedTime?: string;
  modifiedTime?: string;
  author?: string;
  section?: string;
  tags?: string[];
}

const {
  title,
  description,
  keywords,
  image,
  url,
  type = "article",
  publishedTime,
  modifiedTime,
  author,
  section,
  tags = []
} = Astro.props as Props;

const canonicalURL = url || Astro.url.pathname;
const fullImage = image ? new URL(image, Astro.site) : undefined;
---

<!-- Article-specific structured data for better SEO -->
{type === "article" && (
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": title,
    "description": description,
    "image": fullImage,
    "author": {
      "@type": "Organization",
      "name": author || "Talking Textiles Gallery"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Talking Textiles Gallery",
      "logo": {
        "@type": "ImageObject",
        "url": new URL("/favicon.svg", Astro.site)
      }
    },
    "datePublished": publishedTime,
    "dateModified": modifiedTime,
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": canonicalURL
    },
    "articleSection": section,
    "keywords": tags.join(", ")
  })} />
)}

<!-- Breadcrumb structured data -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": Astro.site
    },
    ...(title ? [{
      "@type": "ListItem",
      "position": 2,
      "name": title,
      "item": canonicalURL
    }] : [])
  ]
})} />

<!-- Additional meta tags for this page -->
{keywords && <meta name="keywords" content={keywords} />}
{description && <meta name="description" content={description} />}
{fullImage && (
  <>
    <meta property="og:image" content={fullImage} />
    <meta property="twitter:image" content={fullImage} />
  </>
)}
{url && <link rel="canonical" href={url} />}
