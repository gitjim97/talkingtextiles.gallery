---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('artists');
  return entries.map((entry) => ({ params: { slug: entry.slug }, props: { entry } }));
}

type ArtistEntry = CollectionEntry<'artists'>;
const { entry } = Astro.props as { entry: ArtistEntry };
const d = entry.data;
const pageTitle = d.title || `${d.artistName} Textile Art`;
const description = d.artworkDescription || d.artistBio.slice(0, 150);
---
<Layout pageTitle={pageTitle} description={description} keywords={(d.keywords||[]).join(', ')}>
  <main style="max-width:900px;margin:2rem auto;padding:0 1rem;">
    <a href="/gallery/" style="display:inline-block;margin-bottom:1rem;">‚Üê Back to Gallery</a>
    <h1 style="color:#ffa500;margin:0 0 1rem;">{d.artistName}</h1>
    {d.heroImage && <img src={d.heroImage} alt={d.artworkTitle || d.artistName} style="width:100%;border-radius:12px;box-shadow:0 4px 24px rgba(0,0,0,.35);margin-bottom:1.5rem;" />}
    <section style="margin-bottom:2rem;">
      <h2 style="color:#ffa500;margin:0 0 .75rem;">Artist Statement</h2>
      <p style="line-height:1.6;white-space:pre-wrap;">{d.artistBio}</p>
    </section>
    {d.artworkDescription && <section style="margin-bottom:2rem;">
      <h2 style="color:#ffa500;margin:0 0 .75rem;">About the Artwork{d.artworkTitle?`: ${d.artworkTitle}`:''}</h2>
      <p style="line-height:1.6;white-space:pre-wrap;">{d.artworkDescription}</p>
    </section>}
    {(d.year || d.materials) && <section style="margin-bottom:2rem;">
      <h2 style="color:#ffa500;margin:0 0 .75rem;">Details</h2>
      <ul style="list-style:none;padding:0;line-height:1.6;">
        {d.year && <li><strong>Year:</strong> {d.year}</li>}
        {d.materials && <li><strong>Materials:</strong> {d.materials}</li>}
      </ul>
    </section>}
  </main>
</Layout>
